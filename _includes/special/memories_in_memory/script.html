<script src="{{ "/assets/js/slideout.min.js " | prepend: site.baseurl }}"></script>
<!-- jQuery -->
<script src="{{ "/assets/js/jquery.min.js" | prepend: site.baseurl }}"></script>
<!-- Bootstrap Core JavaScript -->
<script src="{{ "/assets/js/bootstrap.min.js " | prepend: site.baseurl }}"></script>
<script>
  var slideout = new Slideout({
    'menu': document.getElementById('js-slideout-menu'),
    'panel': document.getElementById('js-slideout-panel'),
    'padding': 256,
    'tolerance': 70,
    'side': 'right'
  });

  var fixed = document.querySelector('.fixed-header');

  slideout.on('translate', function(translated) {
    fixed.style.transform = 'translateX(' + translated + 'px)';
  });

  slideout.on('beforeopen', function () {
    fixed.style.transition = 'transform 300ms ease';
    fixed.style.transform = 'translateX(-256px)';
  });

  slideout.on('beforeclose', function () {
    fixed.style.transition = 'transform 300ms ease';
    fixed.style.transform = 'translateX(0px)';
  });

  slideout.on('open', function () {
    fixed.style.transition = '';
  });

  slideout.on('close', function () {
    fixed.style.transition = '';
  });

  document.querySelector('.js-slideout-toggle').addEventListener('click', function() {
    slideout.toggle();
  });

document.querySelector('.menu').addEventListener('click', function(event) {
  if (event.target.nodeName === 'A') { slideout.close(); }
});

</script>
<!-- jQuery script -->
<script>
/* credit: https://css-tricks.com/snippets/jquery/smooth-scrolling */
$(function(){
  // Select all links with hashes
  $('a[href*="#"]')
    // Remove links that don't actually link to anything
    .not('[href="#"]')
    .not('[href="#0"]')
    .click(function(event) {
      // On-page links
      if ((location.pathname.replace(/^\//, '') === this.pathname.replace(/^\//, '')) && (location.hostname == this.hostname)) {
        // Figure out element to scroll to
        var target = $(this.hash);
        target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
        // Does a scroll target exist?
        if (target.length) {
          // Only prevent default if animation is actually gonna happen
          event.preventDefault();
          $('html, body').animate({
            scrollTop: target.offset().top
            }, 1000, function() {
            // Callback after animation
            // Must change focus!
            var $target = $(target);
            $target.focus();
            if ($target.is(":focus")) { // Checking if the target was focused
              return false;
            } else {
              $target.attr('tabindex','-1'); // Adding tabindex for elements not focusable
              $target.focus(); // Set focus again
            };
          });
        }
      }
    });
});

</script>
